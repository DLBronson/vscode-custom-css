
Certainly! Here's a modified Windows batch script that organizes the recorded videos by the date they were recorded and the IP address of each camera:

```batch
@echo off
setlocal enabledelayedexpansion

:: Define camera configurations as an array of IP address and RTSP URLs
set "camera_configs[0]=CAMERA_IP1,rtsp://USERNAME1:PASSWORD1@CAMERA_IP1:PORT1/VIDEO_PATH1"
set "camera_configs[1]=CAMERA_IP2,rtsp://USERNAME2:PASSWORD2@CAMERA_IP2:PORT2/VIDEO_PATH2"
:: Add more camera configurations as needed

:: Output directory
set "output_base_dir=C:\path\to\save\videos"

:: Create a new directory for each day to organize recordings
set "today=%date:~10,4%-%date:~4,2%-%date:~7,2%"
mkdir "%output_base_dir%\%today%" 2>nul

:: Loop through camera configurations and capture video
for /l %%i in (0, 1, 1) do (
  for /f "tokens=1,2 delims=," %%A in ("!camera_configs[%%i]!") do (
    set "camera_ip=%%A"
    set "camera_url=%%B"
  )
  
  for %%A in (!camera_url!) do (
    set "camera_name=%%~nxA"
  )
  set "camera_name=!camera_name:~0,-4!"
  
  ffmpeg -i "!camera_url!" -c:v copy -an -f segment -segment_time 900 -reset_timestamps 1 -strftime 1 "%output_base_dir%\%today%\!camera_ip!\!camera_name!_%%Y-%%m-%%d_%%H-%%M-%%S.mp4"
)
```

In this modified script:

1. Camera configurations are defined as an array of IP addresses and RTSP URLs, separated by commas. This allows you to associate each camera's IP address with its RTSP URL.

2. The `output_base_dir` variable specifies the base directory where recordings will be saved.

3. The script creates a new directory for each day to organize recordings by date.

4. It then loops through the camera configurations, extracts the camera IP address and name from the URL, and uses FFmpeg to capture video from each camera. The recordings are saved in 15-minute segments and organized by date, camera IP address, and camera name within the specified output directory structure.

Make sure to replace the placeholder values in the script with your actual camera configurations and desired output directory. Save the script with a `.bat` extension and run it in a Windows environment.





ffplay rtsp://192.168.1.11:554/HighResolutionVideo
